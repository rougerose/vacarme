#CACHE{0}
[(#SET{abos, #ARRAY})]
<section class="c-abonner-choix">
	<h2><:vpaniers:abonnements_resume_titre:></h2>
	<BOUCLE_progression(PANIERS_LIENS){id_panier=#ENV{id_panier}}>#ID_PANIER
		[(#SET{options, #OPTIONS})]
		<BOUCLE_options(DATA){source table, #GET{options}}{si (#OBJET|=={abonnements_offre})}>
			[(#SET{cle, #COMPTEUR_BOUCLE|moins{1}})]
			[(#SET{opt_coupon, #OPTIONS|table_valeur{#GET{cle}}|table_valeur{0}})]
			[(#SET{opt_numero, #OPTIONS|table_valeur{#GET{cle}}|table_valeur{1}})]
			[(#SET{opt_cadeau, #OPTIONS|table_valeur{#GET{cle}}|table_valeur{2}})]
			
			[(#REM) <!-- sÃ©parer les offres dans un tableau selon le contexte d'affichage --> ]
			[(#ENV{contexte}|=={abonner}|oui)
				[(#GET{opt_coupon}|=={non}|oui)
					[(#SET{abos, #GET{abos}|push{#LISTE{#ID_ABONNEMENTS_OFFRE, #GET{opt_coupon}, #GET{opt_numero}, #GET{opt_cadeau}, #GET{cle}}}})]
				]
			][(#ENV{contexte}|=={offrir}|oui)
				[(#GET{opt_coupon}|!={non}|oui)
					[(#SET{abos, #GET{abos}|push{#LISTE{#ID_ABONNEMENTS_OFFRE, #GET{opt_coupon}, #GET{opt_numero}, #GET{opt_cadeau}, #GET{cle}}}})]
				]
			]
		</BOUCLE_options>
	</BOUCLE_progression>
		<BOUCLE_condition_et_affichage(CONDITION){si (#GET{abos}|count|>{0})}>
			<INCLURE{fond=inclure/abonnements/progression-abonnement, abos=#GET{abos}} />
		</BOUCLE_condition_et_affichage>
		<INCLURE{fond=inclure/abonnements/abonner-progression-panier}/>
		<//B_condition_et_affichage>
	</B_progression>
	<INCLURE{fond=inclure/abonnements/abonner-progression-panier}/>
	<//B_progression>
</section>
