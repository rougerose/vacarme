<BOUCLE_tableau(DATA){source table, #ENV{abos}}>
	[(#SET{id, #VALEUR|table_valeur{0}})]
	[(#SET{coupon, #VALEUR|table_valeur{1}})]
	[(#SET{numero, #VALEUR|table_valeur{2}})]
	[(#SET{cadeau, #VALEUR|table_valeur{3}})]
	[(#SET{cle, #VALEUR|table_valeur{4}})]
	<BOUCLE_abonnement(ABONNEMENTS_OFFRES){id_abonnements_offre=#GET{id}}>
		[(#SET{duree, #DUREE|duree_en_clair})]
		[(#SET{numeros, #DUREE|numeros_nombre_en_clair})]
		[(#SET{prix, #PRIX})]
		<BOUCLE_type_offre(MOTS){id_abonnements_offre}{id_groupe=21}>
			#SET{type_offre, #ID_MOT}
		</BOUCLE_type_offre>
		[(#GET{coupon}|=={non}|oui)
			<ol class="c-progress[ c-progress--colorbg-(#GET{type_offre})]">
				<li class="c-progress__item[ (#GET{type_offre}|oui)is-active]">
					<span><:vpaniers:abonnement_resume_label_abonnement:></span>[
					(#TITRE)[ / (#GET{numeros})][ / (#GET{prix})]]
				</li>
				<li class="c-progress__item[ (#GET{numero}|oui)is-active]">
					<span><:vpaniers:abonnement_resume_label_numero:></span>[
					(#GET{numero}|oui ) [(#GET{numero}|calculer_numero_futur_titre{0})]]
				</li>
				<li class="c-progress__item[ (#GET{cadeau}|>={0}|oui)is-active]">
					<span><:vpaniers:abonnement_resume_label_cadeau:></span>[
					(#GET{cadeau}|=={0}|?{<:vpaniers:abonnement_resume_cadeau_vide:>,#INFO_TITRE{produit, #ENV{cadeau}}})]
				</li>
				<li class="c-progress__item[ (#SESSION{id_auteur}|oui)is-active]">
					[(#SESSION{id_auteur}|?{
						[<span><:vpaniers:abonnement_resume_label_auteur_on:></span> (#SESSION{nom}|prenom_nom)],
						<span><:vpaniers:abonnement_resume_label_auteur_off:></span>
					})]
				</li>
				<li class="c-progress__item c-progress__item--action">
					[(#SET{arg, #VAL{abonnements_offre-}|concat{#ID_ABONNEMENTS_OFFRE}|concat{-#GET{cle}}})]
					[(#BOUTON_ACTION{Supprimer, 
						#URL_ACTION_AUTEUR{supprimer_element_panier,
							#GET{arg}, #URL_PAGE{abonner}},
						c-btn-form c-btn-form--white c-btn-form--upper})]
				</li>
			</ol>]
		[(#GET{coupon}|!={non}|oui)
			<ol class="c-progress[ c-progress--colorbg-(#GET{type_offre})]">
				<li class="c-progress__item[ (#GET{type_offre}|oui)is-active]">
					<span><:vpaniers:abonnement_resume_label_abonnement:></span>[
					(#TITRE)[ / (#GET{numeros})][ / (#GET{prix})]]
				</li>
				<li class="c-progress__item[ (#SESSION{id_auteur}|oui)is-active]">
					[(#SESSION{id_auteur}|?{
						[<span><:vpaniers:abonnement_resume_label_auteur_on:></span> (#SESSION{nom}|prenom_nom)],
						<span><:vpaniers:abonnement_resume_label_auteur_off:></span>
					})]
				</li>
				<li class="c-progress__item[ (#GET{coupon}|is_numeric|oui)is-active]">
					[(#GET{coupon}|is_numeric|?{
						[<span><:vpaniers:abonnement_resume_label_beneficiaire_on:></span>
						(#GET{coupon}|is_numeric|oui) [(#INFO_NOM{auteur, #GET{coupon}}|prenom_nom)]],
						<span><:vpaniers:abonnement_resume_label_beneficiaire_off:></span>
					})]
				</li>
				<li class="c-progress__item c-progress__item--action">
					[(#SET{arg, #VAL{abonnements_offre-}|concat{#ID_ABONNEMENTS_OFFRE}|concat{-#GET{cle}}})]
					[(#BOUTON_ACTION{Supprimer, 
						#URL_ACTION_AUTEUR{supprimer_element_panier,
							#GET{arg}, #URL_PAGE{offrir}},
						c-btn-form c-btn-form--white c-btn-form--upper})
					]
				</li>
			</ol>
		]
	</BOUCLE_abonnement>
</BOUCLE_tableau>
[(#ENV{contexte}|=={abonner}|oui)
	<ol class="c-progress">
		<li class="c-progress__item">
			<span><:vpaniers:abonnement_resume_label_abonnement:></span>
		</li>
		<li class="c-progress__item">
			<span><:vpaniers:abonnement_resume_label_numero:></span>
		</li>
		<li class="c-progress__item">
			<span><:vpaniers:abonnement_resume_label_cadeau:></span>
		</li>
		<li class="c-progress__item[ (#SESSION{id_auteur}|oui)is-active]">
			[(#SESSION{id_auteur}|?{
				[<span><:vpaniers:abonnement_resume_label_auteur_on:></span> (#SESSION{nom}|prenom_nom)],
				<span><:vpaniers:abonnement_resume_label_auteur_off:></span>
			})]
		</li>
	</ol>]
[(#ENV{contexte}|=={offrir}|oui)
	<ol class="c-progress">
		<li class="c-progress__item">
			<span><:vpaniers:abonnement_resume_label_abonnement:></span>
		</li>
		<li class="c-progress__item">
			[(#SESSION{id_auteur}|?{
				[<span><:vpaniers:abonnement_resume_label_auteur_on:></span> (#SESSION{nom}|prenom_nom)],
				<span><:vpaniers:abonnement_resume_label_auteur_off:></span>
			})]
		</li>
		<li class="c-progress__item">
				<span><:vpaniers:abonnement_resume_label_beneficiaire_off:></span>
		</li>
	</ol>
]
<//B_tableau>
